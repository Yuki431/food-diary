<% if node_version and yarn_version -%>
# Install JavaScript dependencies
<% elsif node_version -%>
# Install Node.js
<% elsif yarn_version -%>
# Install yarn
<% end -%>
<% if node_version -%>
ARG NODE_VERSION=<%= node_version %>
<% end -%>
<% if yarn_version -%>
ARG YARN_VERSION=<%= yarn_version %>
<% end -%>
<% if node_version -%>
RUN curl -fsSL https://fnm.vercel.app/install | bash && \
    /root/.local/share/fnm/fnm install $NODE_VERSION
ENV PATH=/root/.local/share/fnm/aliases/default/bin/:$PATH
<% end -%>
<% if yarn_version -%>
<% if yarn_version < '2' -%>
RUN npm install -g yarn@$YARN_VERSION
<% else -%>
<% if (node_version.split('.').map(&:to_i) <=> [16,10,0]) < 0 -%>
RUN npm i -g corepack && \
<% else -%>
RUN corepack enable && \
<% end -%>
    corepack prepare yarn@$YARN_VERSION --activate
<% end -%>
<% end -%>